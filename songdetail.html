<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body style="background-color: cyan;">

<!-- Navigation -->
<nav class="w3-bar w3-black">
    <a href="home.html" class="w3-button w3-bar-item"> back to song list</a>
</nav>

<!-- Band Members -->
<section id="section" style="font-style: oblique;font-size:70px;color: black;background-color: cyan;font-weight:900;">
  
</section>

<!-- Footer -->
<footer class="w3-container w3-padding-64 w3-center w3-black w3-xlarge">
  <p class="w3-medium">
  Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a>
  </p>
</footer>

<script>

$(document).ready(function(){

    document.addEventListener('keypress', logKey);

    function logKey(e) {
        $([document.documentElement, document.body]).animate({
        scrollTop: $("#prgh"+e.key).offset().top
        }, 500);
    }
    
    const params = new Proxy(new URLSearchParams(window.location.search), {
        get: (searchParams, prop) => searchParams.get(prop),
    });
        // Get the value of "some_key" in eg "https://example.com/?some_key=some_value"
    let value = params.songid; // "some_value"
    
    //Token= "Token"+" "+ localStorage.getItem("TokenValue");
    var request= $.ajax({
    type:"POST",
    //url:"https://authentication-appdemo.herokuapp.com/api/songdetails",
    url:"https://authentication-appdemo.herokuapp.com/api/songdetails",
    contentType:"application/json; charset=utf-8",
    data:JSON.stringify({'song_id':value}),
    dataType:"json",
    //headers:{"Authorization":Token},
    success:function(response){
        console.log(response);
        for(var i=0;i<response.length;i++){
        $("#section").append("<p id="+'prgh'+response[i].fields.order+">"+response[i].fields.song_text+"</p><hr style='height:2px;border-width:0;color:gray;background-color:gray'>")
        }
    },
    failure:function(response){
    alert("failure");
    },
    error:function(response){
    alert("error");
    }
    })
})

// var elem = document.getElementById("section");
// function openFullscreen() {
//   if (elem.requestFullscreen) {
//     elem.requestFullscreen();
//   } else if (elem.webkitRequestFullscreen) { /* Safari */
//     elem.webkitRequestFullscreen();
//   } else if (elem.msRequestFullscreen) { /* IE11 */
//     elem.msRequestFullscreen();
//   }
// }

</script>

</body>
</html>

